{"version":3,"file":"pulling-reveal.min.js","sources":["../src/util.ts","../src/pulling.ts","../src/touch.ts","../src/reveal.ts"],"sourcesContent":["export function assertArg(condition: any, message: string) {\n  if (!condition) {\n    throw TypeError(`Invalid arguments: ${message}`);\n  }\n}\n\nexport function polyfill() {\n  Element.prototype.matches = Element.prototype.matches ||\n    // @ts-ignore: Property does not exist\n    Element.prototype.matchesSelector ||\n    Element.prototype.webkitMatchesSelector ||\n    // @ts-ignore: Property does not exist\n    Element.prototype.mozMatchesSelector ||\n    Element.prototype.msMatchesSelector ||\n    // @ts-ignore: Property does not exist\n    Element.prototype.oMatchesSelector;\n\n  Object.entries = Object.entries || ((obj: any) => {\n    return Object.keys(obj).map(key => [key, obj[key]]);\n  });\n\n  Object.values = Object.values || ((obj: any) => {\n    return Object.keys(obj).map(key => obj[key]);\n  });\n\n  Object.assign = Object.assign || ((first: any, ...objects: any[]) => {\n    for (const obj of objects) {\n      for (const [key, val] of Object.entries(obj)) {\n        first[key] = val;\n      }\n    }\n\n    return first;\n  });\n\n  Array.prototype.includes = function includes(value) {\n    return this.indexOf(value) !== -1;\n  };\n}\n","import { assertArg } from './util';\n\nconst timingFunctions: timingFunctions[] = [\n  'linear', 'ease', 'ease-in', 'ease-out',\n  'ease-in-out', 'step-start', 'step-end',\n];\n\nexport default class Pulling {\n  static modes: {\n    [key: string]: typeof Pulling;\n  } = {};\n\n  static create(options: Options) {\n    const mode = options.mode || Object.keys(Pulling.modes)[0] || 'drawer';\n    if (!Pulling.modes[mode]) {\n      const modes = Object.keys(Pulling.modes).map(x => `\"${x}\"`).join(', ');\n      throw TypeError(`${'`mode`'} must be one of ${modes}`);\n    }\n\n    return new Pulling.modes[mode](options);\n  }\n\n  protected menu: HTMLElement;\n  protected panel: HTMLElement;\n  protected side: sides;\n  protected mode: modes;\n  protected margin: number;\n  protected timing: number;\n  protected timingFunction: timingFunctions;\n  protected width: number;\n  protected sensitivity: number;\n  protected slope: number;\n  \n  protected styles: Styles = {\n    base: {\n      menu: {},\n      panel: {},\n    },\n    open: {\n      menu: {},\n      panel: {},\n    },\n    closed: {\n      menu: {},\n      panel: {},\n    },\n  };\n\n  protected constructor(options: Options) {\n    if (!Object.values(Pulling.modes).some(x => this instanceof x)) {\n      throw TypeError(\n        'Calling this constructor is not allowed. ' +\n        'Use `Pulling.create` instead',\n      );\n    }\n\n    const {\n      menu,\n      panel,\n      side,\n      mode,\n      margin,\n      timing,\n      timingFunction,\n      width,\n      sensitivity,\n      slope,\n      touch,\n    } = options;\n\n    this.menu = menu;\n    this.panel = panel;\n    this.side = side || 'left';\n    this.mode = mode || 'drawer';\n    this.margin = margin || 25,\n    this.timing = timing || 200;\n    this.timingFunction = timingFunction || 'ease';\n    this.width = width || 256;\n    this.sensitivity = sensitivity || 0.25;\n    this.slope = slope || 0.5;\n\n    assertArg(\n      this.menu instanceof Element, \n      '`menu` must be of type `Element`',\n    );\n    assertArg(\n      this.panel instanceof Element, \n      '`panel` must be of type `Element`',\n    );\n    assertArg(\n      this.side === 'left' || this.side === 'right', \n      '`side` must be equal to \"left\" or \"right\"',\n    );\n    assertArg(\n      typeof this.margin === 'number',\n      '`margin` must be of type \"number\"',\n    );\n    assertArg(\n      typeof this.timing === 'number',\n      '`timing` must be of type \"number\"',\n    );\n    assertArg(\n      timingFunctions.includes(this.timingFunction),\n      `${'`timingFunction`'} must be one of ${timingFunctions.map(x => `\"${x}\"`).join(', ')}`,\n    );\n    assertArg(\n      typeof this.width === 'number',\n      '`width` must be of type \"number\"',\n    );\n    assertArg(\n      typeof this.sensitivity === 'number',\n      '`sensitivity` must be of type \"number\"',\n    );\n    assertArg(\n      typeof this.slope === 'number',\n      '`slope` must be of type \"number\"',\n    );\n  }\n\n  protected handlers: {\n    beforeclose: Function[],\n    closed: Function[],\n    beforeopen: Function[],\n    opened: Function[],\n    touchstart: Function[],\n    touchmove: Function[],\n    touchend: Function[],\n  } = {\n    beforeclose: [],\n    closed: [],\n    beforeopen: [],\n    opened: [],\n    touchstart: [],\n    touchmove: [],\n    touchend: [],\n  };\n\n  /** Trigger event listeners for the event */\n  protected emit(eventName: eventNames, e?: Event) {\n    this.handlers[eventName].forEach(handler => handler.call(this, e));\n  }\n\n  /** Add an event handler for the event */\n  on(eventName: eventNames, handler: Function) {\n    this.handlers[eventName].push(handler);\n    return this;\n  }\n\n  /** Remove all event handlers for an event */\n  off(eventName: eventNames, handler?: Function) {\n    if (handler) {\n      this.handlers[eventName] = this.handlers[eventName].filter((handle) => {\n        return handle !== handler;\n      });\n    } else {\n      this.handlers[eventName] = [];\n    }\n    return this;\n  }\n\n  state = {\n    opened: false,\n    opening: false,\n    closed: true,\n    closing: false,\n  };\n\n  /** Open the menu */\n  open(e?: Event) {\n    this.emit('beforeopen', e);\n    if (this.disabled) {\n      return this;\n    }\n\n    if (this.state.opened) {\n      return this;\n    }\n\n    this.state.closed = false;\n    this.state.closing = false;\n    this.state.opening = true;\n    this.state.opened = false;\n\n    const offset = this.offset();\n    if (offset > 0) {\n      const duration = `${this.timing * (1 - offset / this.width)}ms`;\n      \n      this.menu.style.transitionDuration = duration;\n      this.panel.style.transitionDuration = duration;\n    }\n\n    Object.assign(this.menu.style, this.styles.open.menu);\n    Object.assign(this.panel.style, this.styles.open.panel);\n\n    const after = () => {\n      this.state.opening = false;\n      this.state.opened = true;\n\n      Object.assign(this.menu.style, this.styles.open.menu);\n      Object.assign(this.panel.style, this.styles.open.panel);\n      \n      this.emit('opened');\n    };\n    if (offset === this.width) {\n      after();\n    } else {\n      this.afterTransitionend(after);\n    }\n\n    return this;\n  }\n\n  /** Close the menu */\n  close(e?: Event) {\n    this.emit('beforeclose', e);\n    if (this.disabled) {\n      return this;\n    }\n\n    if (this.state.closed) {\n      this.state.closing = false;\n      return this;\n    }\n\n    this.state.closed = false;\n    this.state.closing = true;\n    this.state.opening = false;\n    this.state.opened = false;\n\n    const offset = this.offset();\n    if (offset > 0) {\n      const duration = `${this.timing * offset / this.width}ms`;\n      \n      this.menu.style.transitionDuration = duration;\n      this.panel.style.transitionDuration = duration;\n    }\n    \n    Object.assign(this.menu.style, this.styles.closed.menu);\n    Object.assign(this.panel.style, this.styles.closed.panel);\n\n    const after = () => {\n      this.state.closing = false;\n      this.state.closed = true;\n\n      Object.assign(this.menu.style, this.styles.closed.menu);\n      Object.assign(this.panel.style, this.styles.closed.panel);\n      \n      this.emit('closed');\n    };\n    if (offset === 0) {\n      after();\n    } else {\n      this.afterTransitionend(after);\n    }\n\n    return this;\n  }\n  \n  toggle(condition: boolean) {\n    if (condition === true) {\n      this.open();\n    } else if (condition === false) {\n      this.close();\n    } else {\n      this.toggle(this.state.closed || this.state.closing);\n    }\n    return this;\n  }\n\n  protected disabled = false;\n\n  /** Disable the menu functionality */\n  disable() {\n    this.disabled = true;\n    return this;\n  }\n\n  /** Enabled to menu functionality */\n  enable() {\n    this.disabled = false;\n    return this;\n  }\n\n  protected afterTransitionend(callback: Function) {}\n\n  /** get offset from the default (closed) position */\n  protected offset() {\n    return 0;\n  }\n}\n","import Pulling from './pulling';\n\nexport default class TouchPulling extends Pulling {\n  constructor(options: Options) {\n    super(options);\n\n    this.touch = options.touch !== false;\n    \n    if (this.touch) {\n      this.addTouchEvents();\n    }\n  }\n  protected touch: boolean;\n  \n  protected touched = false;\n  \n  /** set offset */\n  protected applyOffset(offset: number) {}\n\n  protected initTouchEvents() {\n    const { width, margin, side, slope, sensitivity, menu, panel } = this;\n\n    const sign = (side === 'left' ? 1 : -1);\n\n    let startClientX = 0;\n    let startClientY = 0;\n\n    let lastClientX = 0;\n\n    let startOffset = 0;\n\n    let prevTime = 0;\n    let lastTime = 0;\n\n    let prevClientX = 0;\n\n    let firstMove = false;\n\n    const onTouchstart = (e: TouchEvent) => {\n      if (this.ignoreSelector && (e.target as HTMLElement).matches(this.ignoreSelector)) {\n        return;\n      }\n\n      this.emit('touchstart', e);\n      if (this.disabled) {\n        return;\n      }\n\n      this.touched = false;\n      if (e.touches.length !== 1) {\n        return;\n      }\n      \n      const { clientX, clientY } = e.touches[0];\n      const offset = this.offset();\n      const region = margin + offset;\n      \n      if (side === 'left' && clientX <= region ||\n        side === 'right' && window.innerWidth - clientX <= region) {\n        this.touched = true;\n\n        startClientX = clientX;\n        startClientY = clientY;\n\n        lastClientX = clientX;\n        \n        startOffset = offset;\n\n        lastTime = Date.now();\n        \n        firstMove = true;\n      }\n    };\n\n    const onTouchmove = (e: TouchEvent) => {\n      this.emit('touchmove', e);\n\n      if (this.disabled || !this.touched) {\n        return;\n      }\n\n      const { clientX, clientY } = e.touches[0];\n      const diffX = (clientX - startClientX) * sign;\n      \n      if (Math.abs(diffX) < 10) {\n        return;\n      }\n      \n      if (firstMove) {\n        const diffY = clientY - startClientY;\n        const currentSlope = Math.abs(diffY / diffX);\n        if (currentSlope > slope) {\n          this.touched = false;\n          return;\n        }\n        \n        if (this.state.closed && diffX > 0) {\n          this.emit('beforeopen');\n        } else if (this.state.opened) {\n          this.emit('beforeopen');\n        }\n\n        menu.style.transition = null;\n        panel.style.transition = null;\n      }\n\n      if (this.state.opened && diffX > 0 || this.state.closed && diffX < 0) {\n        lastClientX = clientX;\n        lastTime = Date.now();\n\n        return;\n      }\n\n      this.state.opened = false;\n      this.state.closed = false;\n\n      const dx = (clientX - lastClientX) * sign;\n      \n      const opening = dx > 0;\n      this.state.opening = opening;\n      this.state.closing = !opening;\n\n      const offset = Math.min(Math.max(0, startOffset + diffX), width);\n      this.applyOffset(offset);\n\n      prevClientX = lastClientX;\n      lastClientX = clientX;\n\n      prevTime = lastTime;\n      lastTime = Date.now();\n      firstMove = false;\n    };\n\n    const onTouchend = (e: TouchEvent) => {\n      if (!this.touched) {\n        return;\n      }\n\n      this.touched = false;\n      if (firstMove) {\n        return;\n      }\n\n      this.emit('touchend', e);\n      \n      Object.assign(this.panel.style, this.styles.base.panel);\n      Object.assign(this.menu.style, this.styles.base.menu);\n\n      const offset = this.offset();\n      const { clientX } = e.changedTouches[0];\n      \n      let x1;\n      let t1;\n\n      if (clientX === lastClientX) {\n        x1 = prevClientX;\n        t1 = prevTime;\n      } else {\n        x1 = lastClientX;\n        t1 = lastTime;\n      }\n\n      const x2 = clientX;\n      const t2 = Date.now();\n\n      const speed = (x2 - x1) / (t2 - t1) * sign;\n\n      if (\n        offset > width / 2 && \n        speed > -sensitivity || \n        speed > sensitivity\n      ) {\n        this.open(e);\n      } else {\n        this.close(e);\n      }\n    };\n\n    return {\n      onTouchstart,\n      onTouchmove,\n      onTouchend,\n    };\n  }\n  protected touchEvents: {\n    onTouchstart(e: TouchEvent): void,\n    onTouchmove(e: TouchEvent): void,\n    onTouchend(e: TouchEvent): void,\n  };\n  protected addTouchEvents() {\n    if (!this.touchEvents) {\n      this.touchEvents = this.initTouchEvents();\n    }\n    document.documentElement.addEventListener('touchstart', this.touchEvents.onTouchstart, false);\n    document.documentElement.addEventListener('touchmove', this.touchEvents.onTouchmove, false);\n    document.documentElement.addEventListener('touchend', this.touchEvents.onTouchend, false);\n  }\n  protected removeTouchEvents() {\n    document.documentElement.removeEventListener('touchstart', this.touchEvents.onTouchstart);\n    document.documentElement.removeEventListener('touchmove', this.touchEvents.onTouchmove);\n    document.documentElement.removeEventListener('touchend', this.touchEvents.onTouchend);\n  }\n\n  protected ignores: string[] = [];\n  protected ignoreSelector: string = '';\n\n  /** Ignore touch events from elements matching a given selector */\n  ignore(selector: string) {\n    this.ignores.push(selector);\n    this.ignoreSelector = this.ignores.join(', ');\n    return this; \n  }\n  /** \n   * Remove selector from ignore list\n   * _Does not_ override `ignore`\n   */\n  unignore(selector: string) {\n    this.ignores = this.ignores.filter(s => s !== selector);\n    this.ignoreSelector = this.ignores.join(', ');\n    return this;\n  }\n\n  /** enable touch functionality */\n  enableTouch() {\n    if (!this.touch) {\n      this.addTouchEvents();\n      this.touch = true;\n    }\n    return this;\n  }\n\n  /** disable touch functionality */\n  disableTouch() {\n    if (this.touch) {\n      this.removeTouchEvents();\n      this.touch = false;\n    }\n    return this;\n  }\n}\n","import TouchPulling from './touch';\n\nexport default class Reveal extends TouchPulling {\n  constructor(options: Options) {\n    super(options);\n\n    this.styles.base.menu = {\n      overflowX: 'hidden',\n      overflowY: 'auto',\n\n      position: 'fixed',\n      [this.side]: '0',\n      top: '0',\n      bottom: '0',\n      width: `${this.width}px`,\n\n      zIndex: '-1',\n    };\n    this.styles.base.panel = {\n      transition: `transform ${this.timing}ms ${this.timingFunction}`,\n    };\n    this.styles.open.panel = {\n      transform: `translateX(${this.side === 'right' ? '-' : ''}${this.width}px)`,\n    };\n    this.styles.closed.panel = {\n      transform: `translateX(0)`,\n    };\n\n    Object.assign(this.menu.style, this.styles.base.menu, this.styles.closed.menu);\n    Object.assign(this.panel.style, this.styles.base.panel, this.styles.closed.panel);\n\n    this.initTransitionend();\n  }\n\n  protected offset() {\n    const panelPos = this.panel.getBoundingClientRect();\n    return Math.abs(panelPos.left);\n  }\n\n  protected applyOffset(offset: number) {\n    const sign = (this.side === 'left' ? 1 : -1);\n    this.panel.style.transform = `translateX(${offset * sign}px)`;\n  }\n\n  private onTransitionend: Function | null;\n\n  protected afterTransitionend(callback: Function) {\n    this.onTransitionend = callback;\n  }\n\n  private initTransitionend() {\n    this.panel.addEventListener('transitionend', () => {\n      if (this.onTransitionend) {\n        this.onTransitionend();\n      }\n\n      this.onTransitionend = null;\n    }, false);\n  }\n}\n\nTouchPulling.modes['reveal'] = Reveal;\n"],"names":["condition","message","TypeError","timingFunctions","options","_super","_this","touch","addTouchEvents","__extends","TouchPulling","offset","_a","width","margin","side","slope","sensitivity","menu","panel","sign","startClientX","startClientY","lastClientX","startOffset","prevTime","lastTime","prevClientX","firstMove","onTouchstart","e","ignoreSelector","target","matches","emit","disabled","touched","touches","length","clientX","clientY","region","window","innerWidth","Date","now","onTouchmove","diffX","Math","abs","diffY","state","closed","opened","style","transition","opening","closing","min","max","applyOffset","onTouchend","Object","assign","styles","base","x1","t1","speed","open","close","this","touchEvents","initTouchEvents","document","documentElement","addEventListener","removeEventListener","selector","ignores","push","join","filter","s","removeTouchEvents","beforeclose","beforeopen","touchstart","touchmove","touchend","values","Pulling","modes","some","x","mode","timing","timingFunction","assertArg","Element","includes","map","keys","eventName","handlers","forEach","handler","call","handle","duration","transitionDuration","after","afterTransitionend","toggle","callback","overflowX","overflowY","position","transform","initTransitionend","Reveal","panelPos","getBoundingClientRect","left","onTransitionend","prototype","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","entries","obj","key","first","_i","objects","objects_1","_c","_b","_d","val","Array","value","indexOf"],"mappings":"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"}